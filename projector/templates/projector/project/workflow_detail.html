{% extends "projector/project/details.html" %}

{% load markup %}
{% load i18n %}
{% load permissions %}

{% block col_main_title %}{{ project.name }}{% endblock %}

{% block col_main_extra %}
<div class="richtemplates-panel">    
    <h5>{% trans "Workflow schema" %}</h5>
    <div class="richtemplates-panel-content">
        <ul class="nav-inline">
        {% ifhasperm "project_permission.change_project" request.user project %}
            <li><a class="button-link" href="{{ project.get_workflow_edit_url }}">{% trans "Edit" %}</a></li>
            <li><a class="button-link" href="{{ project.get_workflow_add_status_url }}">{% trans "Add status" %}</a></li>
        {% endifhasperm %}
        </ul>

        <div class="richblock">
            <ul>
                {% for status in project.status_set.all %}
                <li><span class="bolded">{{ status }}</span>
                    <ul>
                        {% for destination in status.destinations.all %}
                        <li>{{ status }} &rarr; {{ destination }}</li>
                        {% endfor %}
                    </ul>
                </li>
                {% endfor %}
            </ul>
        </div>

    </div>
</div>
{% endblock col_main_extra %}

